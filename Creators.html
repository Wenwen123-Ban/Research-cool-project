<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LBAS | Creators Slideshow v8.0</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --text-primary-contrast: #ffffff;
        --text-muted-contrast: rgba(255, 255, 255, 0.82);
        --glass-strong: rgba(0, 0, 0, 0.62);
        --glass-border: rgba(255, 255, 255, 0.26);
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        overflow-x: hidden;
        background: url("https://www.tangubcity.gov.ph/application/files/1116/1768/0018/NEW_6322.JPG") center center / cover no-repeat;
      }

      .main-header {
        background: #111827;
        color: #fff;
        padding: 14px 0;
        position: sticky;
        top: 0;
        z-index: 2000;
        box-shadow: 0 4px 18px rgba(0, 0, 0, 0.35);
      }

      .main-header::before {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        width: 55%;
        height: 100%;
        background: linear-gradient(125deg, #6d28d9 0%, #8b5cf6 52%, #ec4899 100%);
        clip-path: polygon(30% 0, 100% 0, 100% 100%, 0% 100%);
        z-index: -1;
      }

      .header-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
      }

      .logo-section { display: flex; align-items: center; gap: 12px; }
      .school-logo { width: 44px; height: 44px; border-radius: 50%; background: #fff; object-fit: cover; }

      .logo-section h1 { margin: 0; font-size: 1.15rem; font-weight: 800; }
      .logo-section small { color: rgba(255,255,255,0.82); font-size: 0.74rem; letter-spacing: 0.6px; }

      .main-content {
        position: relative;
        isolation: isolate;
        overflow: hidden;
        padding: 34px 16px 54px;
      }

      .main-content::before {
        content: "";
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.42);
        pointer-events: none;
      }

      .main-content > * { position: relative; z-index: 1; }

      .page-head { text-align: center; margin-bottom: 26px; }
      .page-head h2 { color: #fff; font-weight: 800; margin-bottom: 8px; }
      .page-head p { color: var(--text-muted-contrast); margin: 0; }

      .slideshow-shell {
        width: min(860px, 100%);
        margin: 0 auto;
        background: var(--glass-strong);
        border: 1px solid var(--glass-border);
        border-radius: 22px;
        padding: 28px 22px;
        backdrop-filter: blur(2px);
        -webkit-backdrop-filter: blur(2px);
      }

      .slide-track { position: relative; min-height: 420px; }
      .creator-slide {
        display: none;
        animation: fadeIn 0.35s ease;
        text-align: center;
      }
      .creator-slide.active { display: block; }

      .creator-photo {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        margin: 0 auto 18px;
        border: 4px solid #f8fafc;
        background: linear-gradient(145deg, rgba(129, 140, 248, 0.5), rgba(124, 58, 237, 0.6));
        background-size: cover;
        background-position: center;
        position: relative;
        overflow: hidden;
        cursor: pointer;
      }

      .creator-photo::after {
        content: "Tap to upload";
        position: absolute;
        inset: auto 0 0 0;
        padding: 7px;
        font-size: 0.68rem;
        color: #f8fafc;
        background: rgba(15, 23, 42, 0.68);
      }

      .creator-name,
      .creator-role,
      .creator-desc {
        width: min(540px, 100%);
        margin: 0 auto 11px;
        border: 1px solid rgba(255,255,255,0.32);
        background: rgba(0, 0, 0, 0.46);
        color: #fff;
        border-radius: 10px;
        padding: 10px 12px;
      }

      .creator-name::placeholder,
      .creator-role::placeholder,
      .creator-desc::placeholder { color: rgba(255,255,255,0.76); }

      .creator-desc { min-height: 110px; resize: vertical; }

      .slide-controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 14px;
        margin-top: 12px;
      }

      .slide-arrow {
        width: 44px;
        height: 44px;
        border: 1px solid rgba(255,255,255,0.42);
        border-radius: 50%;
        background: rgba(0,0,0,0.58);
        color: #ffd54f;
        font-size: 1.2rem;
      }

      .dots { display: flex; gap: 8px; align-items: center; }
      .dot {
        width: 11px;
        height: 11px;
        border-radius: 50%;
        border: none;
        background: rgba(255,255,255,0.32);
      }
      .dot.active { background: #ffd54f; transform: scale(1.1); }

      .main-footer {
        padding: 18px 12px;
        text-align: center;
        background: #0f172a;
        color: #cbd5e1;
        border-top: 1px solid #1e293b;
        position: relative;
        overflow: hidden;
      }

      .main-footer::before {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        width: 50%;
        height: 100%;
        background: linear-gradient(120deg, rgba(15, 23, 42, 0.7), rgba(56, 189, 248, 0.2));
        clip-path: polygon(40% 0, 100% 0, 100% 100%, 0% 100%);
      }

      .footer-content { position: relative; z-index: 1; }
      .footer-content p { margin: 3px 0; font-size: 13px; }
      .footer-purpose-link { color: #60a5fa; font-weight: 700; text-decoration: none; }

      @media (max-width: 768px) {
        .header-content { flex-direction: column; align-items: flex-start; gap: 8px; }
        .main-header::before { width: 72%; }
        .slideshow-shell { padding: 20px 14px; }
        .slide-track { min-height: 460px; }
      }

      @keyframes fadeIn { from { opacity: 0.35; } to { opacity: 1; } }
    </style>
  </head>
  <body>
    <!-- LBAS System v8.0 – Lifecycle Stabilization & Structural Hardening -->
    <header class="main-header">
      <div class="header-content">
        <div class="logo-section">
          <img src="https://up.yimg.com/ib/th/id/OIP.3wZU8KYQ9wGoRl3eoloR0QHaHa?pid=Api&rs=1&c=1&qlt=95&w=114&h=114" alt="School Logo" class="school-logo" />
          <div>
            <h1>Library Borrowing and Assistance System</h1>
            <small>CREATORS SHOWCASE</small>
          </div>
        </div>
      </div>
    </header>

    <main class="main-content">
      <section class="page-head">
        <h2>The Makers of the Library Borrowing and Assistance System</h2>
        <p>LBAS System v8.0 – Lifecycle Stabilization &amp; Structural Hardening</p>
      </section>

      <section class="slideshow-shell">
        <div class="slide-track" id="slideTrack">
          <article class="creator-slide active" data-slot="group-leader">
            <input type="file" accept="image/*" hidden />
            <div class="creator-photo"></div>
            <input class="creator-name" type="text" placeholder="Name" />
            <input class="creator-role" type="text" placeholder="Role" value="Group Leader" />
            <textarea class="creator-desc" placeholder="Short description"></textarea>
          </article>

          <article class="creator-slide" data-slot="frontend-1">
            <input type="file" accept="image/*" hidden />
            <div class="creator-photo"></div>
            <input class="creator-name" type="text" placeholder="Name" />
            <input class="creator-role" type="text" placeholder="Role" value="Front-End Developer" />
            <textarea class="creator-desc" placeholder="Short description"></textarea>
          </article>

          <article class="creator-slide" data-slot="frontend-2">
            <input type="file" accept="image/*" hidden />
            <div class="creator-photo"></div>
            <input class="creator-name" type="text" placeholder="Name" />
            <input class="creator-role" type="text" placeholder="Role" value="Front-End Developer" />
            <textarea class="creator-desc" placeholder="Short description"></textarea>
          </article>

          <article class="creator-slide" data-slot="backend-1">
            <input type="file" accept="image/*" hidden />
            <div class="creator-photo"></div>
            <input class="creator-name" type="text" placeholder="Name" />
            <input class="creator-role" type="text" placeholder="Role" value="Back-End Developer" />
            <textarea class="creator-desc" placeholder="Short description"></textarea>
          </article>

          <article class="creator-slide" data-slot="research-1">
            <input type="file" accept="image/*" hidden />
            <div class="creator-photo"></div>
            <input class="creator-name" type="text" placeholder="Name" />
            <input class="creator-role" type="text" placeholder="Role" value="Research Writer &amp; Paper Compiler" />
            <textarea class="creator-desc" placeholder="Short description"></textarea>
          </article>
        </div>

        <div class="slide-controls">
          <button class="slide-arrow" id="prevBtn" aria-label="Previous">&#10094;</button>
          <div class="dots" id="dots"></div>
          <button class="slide-arrow" id="nextBtn" aria-label="Next">&#10095;</button>
        </div>
      </section>
    </main>

    <footer class="main-footer">
      <div class="footer-content">
        <p>© 2025 Library Borrowing and Assistance System</p>
        <p>The Makers of the System</p>
        <p>Purpose: <a class="footer-purpose-link" href="/creators">Creators Page</a></p>
      </div>
    </footer>

    <script>
      const slides = Array.from(document.querySelectorAll('.creator-slide'));
      const dotsWrap = document.getElementById('dots');
      let currentIndex = 0;

      function getPayload(slide) {
        return {
          slot: slide.dataset.slot,
          name: slide.querySelector('.creator-name').value.trim(),
          role: slide.querySelector('.creator-role').value.trim(),
          description: slide.querySelector('.creator-desc').value.trim()
        };
      }

      function applyProfile(slide, profile) {
        if (!profile) return;
        slide.querySelector('.creator-name').value = profile.name || '';
        slide.querySelector('.creator-role').value = profile.role || slide.querySelector('.creator-role').value;
        slide.querySelector('.creator-desc').value = profile.description || '';
        if (profile.photo) {
          slide.querySelector('.creator-photo').style.backgroundImage = `url(Profile/${profile.photo})`;
        }
      }

      async function saveSlide(slide, photoFile = null) {
        const payload = getPayload(slide);
        if (!payload.slot || !payload.name || !payload.role) return;

        const form = new FormData();
        Object.entries(payload).forEach(([k, v]) => form.append(k, v));
        if (photoFile) form.append('photo', photoFile);

        const response = await fetch('/api/creators/upload', { method: 'POST', body: form });
        if (!response.ok) return;

        const result = await response.json();
        if (result?.success && result.profile?.photo) {
          slide.querySelector('.creator-photo').style.backgroundImage = `url(Profile/${result.profile.photo})`;
        }
      }

      async function loadProfiles() {
        const response = await fetch('/api/creators/profiles');
        if (!response.ok) return;
        const data = await response.json();
        const profiles = data?.profiles || {};
        slides.forEach((slide) => applyProfile(slide, profiles[slide.dataset.slot]));
      }

      function renderSlides(index) {
        slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
        Array.from(document.querySelectorAll('.dot')).forEach((dot, i) => dot.classList.toggle('active', i === index));
      }

      function shift(step) {
        currentIndex = (currentIndex + step + slides.length) % slides.length;
        renderSlides(currentIndex);
      }

      slides.forEach((slide, i) => {
        const dot = document.createElement('button');
        dot.className = 'dot' + (i === 0 ? ' active' : '');
        dot.addEventListener('click', () => {
          currentIndex = i;
          renderSlides(currentIndex);
        });
        dotsWrap.appendChild(dot);

        const inputFile = slide.querySelector('input[type="file"]');
        slide.querySelector('.creator-photo').addEventListener('click', () => inputFile.click());
        inputFile.addEventListener('change', () => {
          if (inputFile.files && inputFile.files[0]) saveSlide(slide, inputFile.files[0]);
        });

        slide.querySelectorAll('.creator-name, .creator-role, .creator-desc').forEach((field) => {
          field.addEventListener('blur', () => saveSlide(slide));
        });
      });

      document.getElementById('prevBtn').addEventListener('click', () => shift(-1));
      document.getElementById('nextBtn').addEventListener('click', () => shift(1));
      loadProfiles();
    </script>
  </body>
</html>
